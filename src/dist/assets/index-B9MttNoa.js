(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&t(l)}).observe(document,{childList:!0,subtree:!0});function o(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(e){if(e.ep)return;e.ep=!0;const s=o(e);fetch(e.href,s)}})();const n=()=>{const a=document.querySelectorAll("section > *:not(.no-reveal), .card, .timeline-item, .data-table, .milestone-card"),i=new IntersectionObserver(o=>{o.forEach(t=>{t.isIntersecting&&(t.target.classList.add("in-view"),i.unobserve(t.target))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});a.forEach(o=>{o.classList.add("reveal"),i.observe(o)}),setTimeout(()=>{document.querySelectorAll(".reveal:not(.in-view)").forEach(o=>o.classList.add("in-view"))},2e3)};class c{constructor(){this.modal=null,this.lightbox=null,this.init()}init(){this.createModal(),this.createLightbox(),this.attachListeners()}createModal(){this.modal=document.createElement("div"),this.modal.className="modal-overlay",this.modal.innerHTML=`
      <div class="modal-content">
        <button class="modal-close">&times;</button>
        <div class="modal-body"></div>
      </div>
    `,document.body.appendChild(this.modal)}createLightbox(){this.lightbox=document.createElement("div"),this.lightbox.className="lightbox-overlay",this.lightbox.innerHTML='<img src="" alt="Enlarged" class="lightbox-img">',document.body.appendChild(this.lightbox)}attachListeners(){const i=this.modal.querySelector(".modal-close"),o=this.lightbox;i.addEventListener("click",()=>this.closeModal()),this.modal.addEventListener("click",t=>{t.target===this.modal&&this.closeModal()}),o.addEventListener("click",()=>this.closeLightbox()),document.querySelectorAll("[data-detail-id]").forEach(t=>{t.style.cursor="pointer",t.addEventListener("click",()=>{const e=t.getAttribute("data-detail-id");this.openModal(e)})}),document.addEventListener("keydown",t=>{t.key==="Escape"&&(this.lightbox.classList.contains("active")?this.closeLightbox():this.closeModal())})}openModal(i){const o=document.getElementById(i),t=this.modal.querySelector(".modal-body");o&&(t.innerHTML=o.innerHTML,this.modal.classList.add("active"),document.body.style.overflow="hidden",t.querySelectorAll("img").forEach(e=>{e.classList.add("zoomable"),e.addEventListener("click",s=>{s.stopPropagation(),this.openLightbox(e.src)})}))}closeModal(){this.modal.classList.remove("active"),document.body.style.overflow=""}openLightbox(i){const o=this.lightbox.querySelector(".lightbox-img");o.src=i,this.lightbox.classList.add("active")}closeLightbox(){this.lightbox.classList.remove("active")}}const r=async(a,i)=>{const o=document.querySelector(a);if(o)try{const e=await(await fetch(i)).text();o.innerHTML=e;const s=window.location.pathname.split("/").pop()||"index.html";o.querySelectorAll("a").forEach(l=>{l.getAttribute("href")===s&&l.classList.add("active")})}catch(t){console.error(`Failed to load component: ${i}`,t)}};document.addEventListener("DOMContentLoaded",async()=>{const a=document.createElement("div");a.id="modal-container",a.style.display="none",document.body.appendChild(a),await Promise.all([r(".site-header","/partials/header.html"),r("footer","/partials/footer.html"),r("#modal-container","/partials/modals.html")]),n(),new c});
